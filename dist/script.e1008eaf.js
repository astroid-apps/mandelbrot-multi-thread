parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"sk9w":[function(require,module,exports) {
var e=function(e,t,a){return{x:e.a*t+e.c*a+e.e,y:e.b*t+e.d*a+e.f}};module.exports.XY=function(t,a,r){var s=t.getTransform().invertSelf(),n=e(s,a.si,a.sj),i=e(s,a.ei,a.ej);if(null!=r){var l=e(s,r.si,r.sj),x=e(s,r.ei,r.ej);t.translate(i.x,i.y);var j=l.x-n.x,y=l.y-n.y,f=x.x-i.x,o=x.y-i.y,u=1/(j*j+y*y),d=f*j+o*y,v=o*j-f*y;t.transform(d*u,v*u,-v*u,d*u,0,0),t.translate(-i.x,-i.y),t.translate(i.x-n.x,i.y-n.y)}else t.translate(i.x-n.x,i.y-n.y)},module.exports.IJ=function(e,t,a){if(null!=a){e.translate(t.ei,t.ej);var r=a.si-t.si,s=a.sj-t.sj,n=a.ei-t.ei,i=a.ej-t.ej,l=1/(r*r+s*s),x=n*r+i*s,j=i*r-n*s;e.transform(x*l,j*l,-j*l,x*l,0,0),e.translate(-t.ei,-t.ej),e.translate(t.di,t.dj)}else e.translate(t.di,t.dj)};
},{}],"tjbw":[function(require,module,exports) {
var e=require("./pinchTransform.js");module.exports=function(t,n,a,i){"min"in n.x||(n.x.min=void 0),"max"in n.x||(n.x.max=void 0),"min"in n.y||(n.y.min=void 0),"max"in n.y||(n.y.max=void 0);var r=t.clientWidth,o=t.clientHeight,s=document.createElement("canvas");s.width=r,s.height=o,s.style.cursor="move",s.style.touchAction="none",t.appendChild(s);var l=s.getContext("2d");l.fillStyle="rgba(255,255,255,1.0)",l.strokeStyle="rgba(255,255,255,1.0)",l.translate(.5*r,.5*o),l.scale(n.scale.init,-n.scale.init),l.translate(-n.x.init,-n.y.init);var f=l.getTransform(),c=l.getTransform().invertSelf(),m=function(){f=l.getTransform(),c=l.getTransform().invertSelf()},d=function(e,t){return{x:c.a*e+c.c*t+c.e,y:c.b*e+c.d*t+c.f}},x=function(){m();var e=d(.5*r,.5*o),t=e.x,a=e.y;null!=n.x.min&&t<n.x.min&&(t=n.x.min),null!=n.x.max&&t>n.x.max&&(t=n.x.max),null!=n.y.min&&a<n.y.min&&(a=n.y.min),null!=n.y.max&&a>n.y.max&&(a=n.y.max),l.translate(e.x-t,e.y-a)},v=function(e){m();var t=Math.sqrt(f.a*f.a+f.b*f.b),a=1;t>n.scale.max&&(a=n.scale.max/t),t<n.scale.min&&(a=n.scale.min/t),l.translate(e.x,e.y),l.scale(a,a),l.translate(-e.x,-e.y)},u=[];s.addEventListener("pointerdown",function(e){u.push({id:e.pointerId,si:e.offsetX,sj:e.offsetY})});var h=function(e){var t=u.find(function(t){return t.id==e.pointerId});t.ei=e.offsetX,t.ej=e.offsetY,t.di=e.offsetX-t.si,t.dj=e.offsetY-t.sj};s.addEventListener("pointermove",function(e){0==u.length?{i:e.offsetX,j:e.offsetY}:1==u.length?(h(e),T(u[0])):2==u.length&&(h(e),T(u[0],u[1]))});var y=function(t){if(1==u.length)e.XY(l,u[0]);else if(2==u.length){e.XY(l,u[0],u[1]);var n=.5*(u[0].si+u[1].si),a=.5*(u[0].sj+u[1].sj);m(),v(d(n,a))}x(),Y(),u=[]};window.addEventListener("pointerup",y),window.addEventListener("pointercancel",y),s.addEventListener("wheel",function(e){m();var t=d(e.offsetX,e.offsetY),n=e.deltaY<0?1.4:1/1.4;l.translate(t.x,t.y),l.scale(n,n),l.translate(-t.x,-t.y),v(t),x(),Y()});var g=function(){var e=.5*r,t=.5*o,n=l.getTransform().invertSelf(),a=n.a*e+n.c*t+n.e,s=n.b*e+n.d*t+n.f,f=1/Math.sqrt(n.a*n.a+n.b*n.b);i("X="+a.toFixed(8)+"<br>Y="+s.toFixed(8)+"<br>Scale="+f.toFixed(1)+"[px/1]")},b=function(){l.save(),l.resetTransform(),l.strokeStyle="rgba(255,255,255,1.0)";var e=.5*r,t=.5*o;l.lineWidth=1,l.beginPath(),l.moveTo(e-10,t),l.lineTo(e+10,t),l.closePath(),l.stroke(),l.beginPath(),l.moveTo(e,t-10),l.lineTo(e,t+10),l.closePath(),l.stroke(),l.restore()},p=new Image,T=function(t,n){l.save(),l.resetTransform(),l.clearRect(0,0,r,o),e.IJ(l,t,n),l.drawImage(p,0,0,r,o,0,0,r,o),l.restore(),b(),l.save(),e.XY(l,t,n),g(),l.restore()},Y=function(){a(l,r,o).then(function(){p.src=s.toDataURL(),b(),g()})};Y()};
},{"./pinchTransform.js":"sk9w"}],"W4in":[function(require,module,exports) {
var r=function(r){return{r:(16711680&r)>>16,g:(65280&r)>>8,b:255&r}};module.exports=function(n,t,u){var e=u.length,o=(t-n)/(e-1),f=function(r,n,t,u,e){return(r-n)*(e-t)/(u-n)+t};this.get=function(i){if(i<=n)return r(u[0]);if(i>=t)return r(u[e-1]);var g=Math.floor((i-n)/o),a=n+g*o,b=r(u[g]),c=r(u[g+1]);return{r:f(i,a,b.r,a+o,c.r),g:f(i,a,b.g,a+o,c.g),b:f(i,a,b.b,a+o,c.b)}}};
},{}],"vRgL":[function(require,module,exports) {
function e(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=t(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,u=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw u}}}}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r=require("./Colorbar.js"),a=new r(0,64,[0,6316287,16777215,16777056,0]),o=function(e){var t,n=new Worker("mandelbrot_worker.d234d0c4.js");this.set=function(r,a,o,u,i){t=r;for(var s=[],f=[],l=a;l<o;l++)for(var c=0;c<u;c++){s.push(c),f.push(l)}return new Promise(function(a,o){n.addEventListener("message",function u(i){r==i.data.id&&(e&&t!=i.data.id&&o("中断"),n.removeEventListener("message",u),a(i.data))}),n.postMessage({id:r,skippable:e,I:s,J:f,m:i})})}},u=!0,i=[];i.push(new o(u)),i.push(new o(u)),i.push(new o(u)),i.push(new o(u)),i.push(new o(u)),i.push(new o(u)),i.push(new o(u)),i.push(new o(u)),module.exports=function(t,n,r){for(var o=Date.now(),u=t.getTransform().invertSelf(),s=Math.floor(r/i.length),f=[],l=0;l<i.length-1;l++)f.push(i[l].set(o,s*l,s*(l+1),n,u));return f.push(i[i.length-1].set(o,s*(i.length-1),r,n,u)),Promise.all(f).then(function(o){t.save(),t.resetTransform(),t.clearRect(0,0,n,r),t.restore();var u,i=t.getImageData(0,0,n,r),s=e(o);try{for(s.s();!(u=s.n()).done;)for(var f=u.value,l=0;l<f.I.length;l++){var c=4*(f.I[l]+f.J[l]*n),h=a.get(f.Z[l]%64);i.data[c]=h.r,i.data[c+1]=h.g,i.data[c+2]=h.b,i.data[c+3]=255}}catch(d){s.e(d)}finally{s.f()}t.putImageData(i,0,0)}).catch(function(e){})};
},{"./Colorbar.js":"W4in","./mandelbrot_worker.js":[["mandelbrot_worker.d234d0c4.js","zj7k"],"mandelbrot_worker.d234d0c4.js.map","zj7k"]}],"mpVp":[function(require,module,exports) {
var e=require("./Viewer.js"),n=require("./mandelbrot.js"),i=new e(document.getElementById("viewer"),{x:{init:-.5,min:-2,max:1},y:{init:0,min:-1.5,max:1.5},scale:{init:100,min:100,max:2e8}},function(e,i,t){return n(e,i,t)},function(e){document.getElementById("status").innerHTML=e});
},{"./Viewer.js":"tjbw","./mandelbrot.js":"vRgL"}]},{},["mpVp"], null)
//# sourceMappingURL=script.e1008eaf.js.map