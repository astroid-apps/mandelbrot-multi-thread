{"version":3,"sources":["pinchTransform.js","Viewer.js","Colorbar.js","mandelbrot.js","script.js"],"names":["getXY","m","i","j","x","a","c","e","y","b","d","f","module","exports","XY","ctx","p0","p1","getTransform","invertSelf","p0s","si","sj","p0e","ei","ej","undefined","p1s","p1e","translate","vsi","vsj","vei","vej","k","ad","bc","transform","IJ","di","dj","pinchTransform","require","element","view","draw","status","min","max","width","clientWidth","height","clientHeight","canvas","document","createElement","style","cursor","touchAction","appendChild","getContext","fillStyle","strokeStyle","scale","init","mtXY2IJ","mtIJ2XY","updateMatrix","clampXY","p","clampScale","Math","sqrt","pointers","addEventListener","push","id","pointerId","offsetX","offsetY","setShift","pt","find","length","movingUpdate","pointerend","ci","cj","update","window","deltaY","info","s","toFixed","drawCenter","save","resetTransform","lineWidth","beginPath","moveTo","lineTo","closePath","stroke","restore","image","Image","clearRect","drawImage","then","src","toDataURL","HEX2RGB","r","g","colors","n","dx","interpolate","x0","y0","x1","y1","get","floor","c0","c1","Colorbar","cb","Thread","skippable","worker","lastId","Worker","set","jmin","jmax","I","J","promise","Promise","resolve","reject","message","data","removeEventListener","postMessage","threads","Date","now","dh","promises","all","results","getImageData","index","Z","putImageData","catch","reason","Viewer","mandelbrot","vw","getElementById","str","innerHTML"],"mappings":"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","file":"script.e1008eaf.js","sourceRoot":"..\\src","sourcesContent":["/*\r\n\tpinchTransform\r\n\t2020/11/02 Viewerから切り離し\r\n*/\r\n\r\nconst getXY = function(m,i,j){\r\n\tconst x = m.a * i + m.c * j + m.e;\r\n\tconst y = m.b * i + m.d * j + m.f;\r\n\treturn {x,y};\r\n};\r\n\r\n//p0sがp0e、p1sがp1eに一致するように平行移動回転拡大(XY座標系で処理)\r\nmodule.exports.XY = function(ctx,p0,p1){\r\n\t\r\n\tconst m = ctx.getTransform().invertSelf()\r\n\t\r\n\tconst p0s = getXY(m,p0.si,p0.sj);\r\n\tconst p0e = getXY(m,p0.ei,p0.ej);\r\n\t\r\n\t//p1が未指定の場合は、平行移動のみ\r\n\tif(p1 == undefined){\r\n\t\tctx.translate(p0e.x - p0s.x, p0e.y - p0s.y);\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tconst p1s = getXY(m,p1.si,p1.sj);\r\n\tconst p1e = getXY(m,p1.ei,p1.ej);\r\n\r\n\tctx.translate(p0e.x, p0e.y);\r\n\r\n\t//p0を中心としてvsがveに一致するように回転拡大する座標変換\r\n\t//移動前のp0→p1ベクトルvs、移動後のp0→p1ベクトルve\r\n\tconst vsi = p1s.x - p0s.x;\r\n\tconst vsj = p1s.y - p0s.y;\r\n\tconst vei = p1e.x - p0e.x;\r\n\tconst vej = p1e.y - p0e.y;\r\n\tconst k = 1 / (vsi * vsi + vsj * vsj);\r\n\tconst ad = vei * vsi + vej * vsj;\r\n\tconst bc = vej * vsi - vei * vsj;\r\n\tctx.transform(ad * k, bc * k, -bc * k, ad * k, 0, 0);\r\n\r\n\tctx.translate(-p0e.x, -p0e.y);\r\n\r\n\t//p0の位置を合わせる\r\n\tctx.translate(p0e.x - p0s.x, p0e.y - p0s.y);\r\n};\r\n\r\n\r\n//p0sがp0e、p1sがp1eに一致するように平行移動回転拡大(IJ座標系で処理)\r\nmodule.exports.IJ = function(ctx,p0,p1){\r\n\t\r\n\t//p1が未指定の場合は、平行移動のみ\r\n\tif(p1 == undefined){\r\n\t\tctx.translate(p0.di,p0.dj);\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tctx.translate(p0.ei,p0.ej);\r\n\r\n\t//p0を中心としてvsがveに一致するように回転拡大する座標変換\r\n\t//移動前のp0→p1ベクトルvs、移動後のp0→p1ベクトルve\r\n\tconst vsi = p1.si - p0.si;\r\n\tconst vsj = p1.sj - p0.sj;\r\n\tconst vei = p1.ei - p0.ei;\r\n\tconst vej = p1.ej - p0.ej;\r\n\tconst k = 1 / (vsi * vsi + vsj * vsj);\r\n\tconst ad = vei * vsi + vej * vsj;\r\n\tconst bc = vej * vsi - vei * vsj;\r\n\tctx.transform(ad * k, bc * k, -bc * k, ad * k, 0, 0);\r\n\r\n\tctx.translate(-p0.ei,-p0.ej);\r\n\r\n\t//p0の位置を合わせる\r\n\tctx.translate(p0.di,p0.dj);\r\n};","/*\r\n\tViewer\r\n\t2020/10/26 新規作成\r\n*/\r\n\r\nconst pinchTransform = require(\"./pinchTransform.js\");\r\n\r\n//表示画面\r\nmodule.exports = function(element,view,draw,status){\r\n\t\r\n\tif(!(\"min\" in view.x)) view.x.min = undefined;\r\n\tif(!(\"max\" in view.x)) view.x.max = undefined;\r\n\tif(!(\"min\" in view.y)) view.y.min = undefined;\r\n\tif(!(\"max\" in view.y)) view.y.max = undefined;\r\n\t\r\n\tconst width = element.clientWidth;\r\n\tconst height = element.clientHeight;\r\n\t\r\n\tconst canvas = document.createElement(\"canvas\");\r\n\tcanvas.width = width;\r\n\tcanvas.height = height;\r\n\tcanvas.style.cursor = \"move\";\r\n\tcanvas.style.touchAction = \"none\";\r\n\telement.appendChild(canvas);\r\n\t\r\n\tconst ctx = canvas.getContext(\"2d\");\r\n\tctx.fillStyle = \"rgba(255,255,255,1.0)\";\r\n\tctx.strokeStyle = \"rgba(255,255,255,1.0)\";\r\n\t\r\n\t//原点をcanvas中心に移動\r\n\tctx.translate(width * 0.5, height * 0.5);\r\n\t\r\n\t//縮尺[px/1]、Y軸を上下逆転\r\n\tctx.scale(view.scale.init, -view.scale.init);\r\n\t\r\n\t//画面中心の座標(X,Y)を設定\r\n\tctx.translate(-view.x.init, -view.y.init);\r\n\t\r\n\t//--------------------------------------------------\r\n\t//座標変換\r\n\t//--------------------------------------------------\r\n\t\r\n\tlet mtXY2IJ = ctx.getTransform();\r\n\tlet mtIJ2XY = ctx.getTransform().invertSelf();\r\n\t\r\n\t//getXY,getIJ,getScaleを呼び出す前に実行する必要あり\r\n\tconst updateMatrix = function(){\r\n\t\tmtXY2IJ = ctx.getTransform();\r\n\t\tmtIJ2XY = ctx.getTransform().invertSelf();\r\n\t};\r\n\t\r\n\tconst getXY = function(i,j){\r\n\t\tconst x = mtIJ2XY.a * i + mtIJ2XY.c * j + mtIJ2XY.e;\r\n\t\tconst y = mtIJ2XY.b * i + mtIJ2XY.d * j + mtIJ2XY.f;\r\n\t\treturn {x,y};\r\n\t};\r\n\t\r\n\tconst getIJ = function(x,y){\r\n\t\tconst i = mtXY2IJ.a * x + mtXY2IJ.c * y + mtXY2IJ.e;\r\n\t\tconst j = mtXY2IJ.b * x + mtXY2IJ.d * y + mtXY2IJ.f;\r\n\t\treturn {i,j};\r\n\t};\r\n\t\r\n\tconst getScale = function(){\r\n\t\treturn Math.sqrt(mtXY2IJ.a * mtXY2IJ.a + mtXY2IJ.b * mtXY2IJ.b);\r\n\t};\r\n\t\r\n\t//--------------------------------------------------\r\n\t//移動拡大制約\r\n\t//--------------------------------------------------\r\n\t\r\n\t//画面中心がxyの範囲内に収まるように移動\r\n\tconst clampXY = function(){\r\n\t\tupdateMatrix();\r\n\t\tconst p = getXY(width * 0.5,height * 0.5);\r\n\t\t\r\n\t\tlet x = p.x;\r\n\t\tlet y = p.y;\r\n\t\t\r\n\t\tif(view.x.min != undefined && x < view.x.min) x = view.x.min;\r\n\t\tif(view.x.max != undefined && x > view.x.max) x = view.x.max;\r\n\t\tif(view.y.min != undefined && y < view.y.min) y = view.y.min;\r\n\t\tif(view.y.max != undefined && y > view.y.max) y = view.y.max;\r\n\t\t\r\n\t\tctx.translate(p.x - x, p.y - y);\r\n\t};\r\n\t\r\n\t//p: 拡大中心位置(XY座標)\r\n\tconst clampScale = function(p){\r\n\t\tupdateMatrix();\r\n\t\tconst scale = getScale();\r\n\t\t\r\n\t\tlet k = 1;\r\n\t\t\r\n\t\tif(scale > view.scale.max){\r\n\t\t\tk = view.scale.max / scale;\r\n\t\t};\r\n\t\t\r\n\t\tif(scale < view.scale.min){\r\n\t\t\tk = view.scale.min / scale;\r\n\t\t};\r\n\t\t\r\n\t\tctx.translate(p.x, p.y);\r\n\t\tctx.scale(k,k);\r\n\t\tctx.translate(-p.x, -p.y);\r\n\t};\r\n\t\r\n\t//--------------------------------------------------\r\n\t//ポインターイベント\r\n\t//--------------------------------------------------\r\n\t\r\n\t//動作中のポインター\r\n\tlet mouse = null;\t//クリックしていない状態のマウス位置（e.pointerId=1となるが、pointersには含めない)\r\n\tlet pointers = [];\t//クリックまたはタップされたポインターの位置\r\n\t\r\n\tcanvas.addEventListener(\"pointerdown\",function(e){\r\n\t\tpointers.push({\r\n\t\t\tid: e.pointerId,\r\n\t\t\tsi: e.offsetX,\r\n\t\t\tsj: e.offsetY,\r\n\t\t});\r\n\t});\r\n\t\r\n\t//該当するポインターの状態を更新する\r\n\tconst setShift = function(e){\r\n\t\tconst pt = pointers.find(function(p){\r\n\t\t\treturn p.id == e.pointerId;\r\n\t\t});\r\n\t\t\r\n\t\t//最新位置\r\n\t\tpt.ei = e.offsetX;\r\n\t\tpt.ej = e.offsetY;\r\n\t\t\r\n\t\t//移動量\r\n\t\tpt.di = e.offsetX - pt.si;\r\n\t\tpt.dj = e.offsetY - pt.sj;\r\n\t};\r\n\t\r\n\tcanvas.addEventListener(\"pointermove\",function(e){\r\n\t\t\r\n\t\tif(pointers.length == 0){\r\n\t\t\tmouse = {\r\n\t\t\t\ti: e.offsetX,\r\n\t\t\t\tj: e.offsetY,\r\n\t\t\t};\r\n\t\t\t\r\n\t\t}else if(pointers.length == 1){\r\n\t\t\tsetShift(e);\r\n\t\t\tmovingUpdate(pointers[0]);\r\n\t\t\t\r\n\t\t}else if(pointers.length == 2){\r\n\t\t\tsetShift(e);\r\n\t\t\tmovingUpdate(pointers[0],pointers[1]);\r\n\t\t}\r\n\t});\r\n\t\r\n\t//ポインター終了時の動作\r\n\tconst pointerend = function(e){\r\n\t\t\r\n\t\t//座標変換を確定させる\r\n\t\tif(pointers.length == 1){\r\n\t\t\tpinchTransform.XY(ctx,pointers[0]);\r\n\t\t\t\r\n\t\t}else if(pointers.length == 2){\r\n\t\t\tpinchTransform.XY(ctx,pointers[0],pointers[1]);\r\n\t\t\t\r\n\t\t\t//ズーム制約\r\n\t\t\tconst ci = (pointers[0].si + pointers[1].si) * 0.5;\r\n\t\t\tconst cj = (pointers[0].sj + pointers[1].sj) * 0.5;\r\n\t\t\tupdateMatrix();\r\n\t\t\tclampScale(getXY(ci,cj));\r\n\t\t}\r\n\t\t\r\n\t\tclampXY();\r\n\t\tupdate();\r\n\t\t\r\n\t\tpointers = [];\r\n\t};\r\n\t\r\n\twindow.addEventListener(\"pointerup\",pointerend);\r\n\twindow.addEventListener(\"pointercancel\",pointerend);\r\n\t\r\n\t//--------------------------------------------------\r\n\t//マウスホイールイベント(PC専用)\r\n\t//--------------------------------------------------\r\n\t\r\n\tcanvas.addEventListener(\"wheel\",function(e){\r\n\t\t\r\n\t\t//マウスの位置pを中心にk倍する\r\n\t\tupdateMatrix();\r\n\t\tconst p = getXY(e.offsetX,e.offsetY);\r\n\t\tconst k = e.deltaY < 0 ? 1.4 : 1 / 1.4;\r\n\t\t\r\n\t\tctx.translate(p.x,p.y);\r\n\t\tctx.scale(k,k);\r\n\t\tctx.translate(-p.x,-p.y);\r\n\t\t\r\n\t\tclampScale(p);\r\n\t\tclampXY();\r\n\t\tupdate();\r\n\t});\r\n\t\r\n\t//--------------------------------------------------\r\n\t//status表示(現在のctxにおける画面中心のXY座標とScale)\r\n\t//--------------------------------------------------\r\n\t\r\n\tconst info = function(){\r\n\t\tconst i = width * 0.5;\r\n\t\tconst j = height * 0.5;\r\n\t\tconst m = ctx.getTransform().invertSelf();\r\n\t\tconst x = m.a * i + m.c * j + m.e;\r\n\t\tconst y = m.b * i + m.d * j + m.f;\r\n\t\tconst s = 1 / Math.sqrt(m.a * m.a + m.b * m.b);\r\n\t\tstatus(\"X=\" + x.toFixed(8) + \"<br>Y=\" + y.toFixed(8) + \"<br>Scale=\" + s.toFixed(1) + \"[px/1]\");\r\n\t};\r\n\t\r\n\t//--------------------------------------------------\r\n\t//描画\r\n\t//--------------------------------------------------\r\n\t\r\n\t//画面中心の「＋」表示(IJ座標系で処理)\r\n\tconst drawCenter = function(){\r\n\t\tctx.save();\r\n\t\tctx.resetTransform();\r\n\t\tctx.strokeStyle = \"rgba(255,255,255,1.0)\";\r\n\t\t\r\n\t\tconst ci = width * 0.5;\r\n\t\tconst cj = height * 0.5;\r\n\t\t\r\n\t\tctx.lineWidth = 1.0;\r\n\t\t\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(ci-10,cj);\r\n\t\tctx.lineTo(ci+10,cj);\r\n\t\tctx.closePath();\r\n\t\tctx.stroke();\r\n\t\t\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(ci,cj-10);\r\n\t\tctx.lineTo(ci,cj+10);\r\n\t\tctx.closePath();\r\n\t\tctx.stroke();\r\n\t\t\r\n\t\tctx.restore();\r\n\t};\r\n\t\r\n\t//XY目盛り\r\n\tconst drawGrid = function(xmin,xmax,dx,ymin,ymax,dy){\r\n\t\tfor(let x = xmin; x <= xmax; x += dx){\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x,ymin);\r\n\t\t\tctx.lineTo(x,ymax);\r\n\t\t\tctx.closePath();\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\r\n\t\tfor(let y = ymin; y <= ymax; y += dy){\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(xmin,y);\r\n\t\t\tctx.lineTo(xmax,y);\r\n\t\t\tctx.closePath();\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\t};\r\n\t\r\n\t//画面に表示された画像(移動中に表示させる)\r\n\tconst image = new Image();\r\n\t\r\n\t//移動しながらの簡易表示\r\n\tconst movingUpdate = function(p0,p1){\r\n\t\t\r\n\t\t//IJ座標系で処理\r\n\t\tctx.save();\r\n\t\tctx.resetTransform();\r\n\t\tctx.clearRect(0, 0, width, height);\r\n\t\t\r\n\t\tpinchTransform.IJ(ctx,p0,p1);\r\n\t\t\r\n\t\tctx.drawImage(image,0,0,width,height,0,0,width,height);\r\n\t\tctx.restore();\r\n\t\t\r\n\t\tdrawCenter();\r\n\t\t\r\n\t\t//XY座標系で画面中心位置の状態を求めて表示\r\n\t\tctx.save();\r\n\t\tpinchTransform.XY(ctx,p0,p1);\r\n\t\tinfo();\r\n\t\tctx.restore();\r\n\t};\r\n\t\r\n\t//移動完了後の再表示\r\n\tconst update = function(){\r\n\t\t\r\n\t\t//IJ座標系に直して全画面消去\r\n//\t\tctx.save();\r\n//\t\tctx.resetTransform();\r\n//\t\tctx.clearRect(0, 0, width, height);\r\n//\t\tctx.restore();\r\n\t\t\r\n\t\t//XY座標で描画\r\n\t\tdraw(ctx,width,height).then(function(){\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//X,Y目盛り\r\n\t\t\t//ctx.lineWidth = 0.5 / getScale();\r\n\t\t\t//drawGrid(view.x.min,view.x.max,1,view.y.min,view.y.max,1);\r\n\r\n\t\t\t//IJ座標系に直して描画(文字サイズをピクセル単位で指定するため)\r\n\t\t\t/*\r\n\t\t\tlet mt = ctx.getTransform();\r\n\t\t\tconst getIJ = function(x,y){\r\n\t\t\t\tconst i = mt.a * x + mt.c * y + mt.e;\r\n\t\t\t\tconst j = mt.b * x + mt.d * y + mt.f;\r\n\t\t\t\treturn {i,j};\r\n\t\t\t};\r\n\r\n\t\t\tctx.save();\r\n\t\t\tctx.resetTransform();\r\n\r\n\t\t\tconst p = getIJ(0,0);\r\n\t\t\tctx.fillText(\"0\",p.i,p.j);\r\n\r\n\t\t\tconst p1 = getIJ(1,0);\r\n\t\t\tctx.fillText(\"1\",p1.i,p1.j);\r\n\r\n\t\t\tctx.restore();\r\n\t\t\t*/\r\n\r\n\t\t\t//移動中表示用の画像保存\r\n\t\t\timage.src = canvas.toDataURL();\r\n\r\n\t\t\t//情報表示\r\n\t\t\tdrawCenter();\r\n\t\t\tinfo();\r\n\t\t});\r\n\t};\r\n\t\r\n\tupdate();\r\n};","/*\r\n\tColorbar\r\n\t2020/11/01 新規作成\r\n*/\r\n\r\nconst HEX2RGB = function(c){\r\n\tconst r = (c & 0xff0000) >> 16;\r\n\tconst g = (c & 0x00ff00) >> 8;\r\n\tconst b = c & 0x0000ff;\r\n\treturn {r,g,b};\r\n};\r\n\r\nmodule.exports = function(min,max,colors){\r\n\t\r\n\tconst n = colors.length;\r\n\tconst dx = (max - min) / (n - 1);\r\n\t\r\n\tconst interpolate = function(x,x0,y0,x1,y1){\r\n\t\treturn (x - x0) * (y1 - y0) / (x1 - x0) + y0;\r\n\t}\r\n\t\r\n\tthis.get = function(x){\r\n\t\tif(x <= min) return HEX2RGB(colors[0]);\r\n\t\tif(x >= max) return HEX2RGB(colors[n-1]);\r\n\t\t\r\n\t\tconst i = Math.floor((x - min) / dx);\r\n\t\tconst x0 = min + i * dx;\r\n\t\tconst c0 = HEX2RGB(colors[i]);\r\n\t\tconst c1 = HEX2RGB(colors[i+1]);\r\n\t\t\r\n\t\tconst r = interpolate(x,x0,c0.r,x0 + dx,c1.r);\r\n\t\tconst g = interpolate(x,x0,c0.g,x0 + dx,c1.g);\r\n\t\tconst b = interpolate(x,x0,c0.b,x0 + dx,c1.b);\r\n\t\treturn {r,g,b};\r\n\t};\r\n};\r\n","/*\r\n\tマンデルブロ集合(Worker利用)\r\n\t2020/10/27 新規作成\r\n\t\r\n\tskippable = true\r\n\t最後の処理だけ実施する(途中の処理は中断)\r\n\t\r\n\tskippable = false\r\n\t全ての処理を順番に実施する\r\n*/\r\n\r\nconst Colorbar = require(\"./Colorbar.js\");\r\nconst cb = new Colorbar(0,64,[0x000000,0x6060ff,0xffffff,0xffff60,0x000000]);\r\n\r\n\r\nconst Thread = function(skippable){\r\n\tconst worker = new Worker(\"./mandelbrot_worker.js\");\r\n\t\r\n\tlet lastId;\r\n\t\r\n\tthis.set = function(id,jmin,jmax,width,m){\r\n\t\tlastId = id;\r\n\t\t\r\n\t\tconst I = [];\r\n\t\tconst J = [];\r\n\r\n\t\tfor(let j=jmin; j<jmax; j++){\r\n\t\t\tfor(let i=0; i<width; i++){\r\n\t\t\t\tconst index = (i + j * width) * 4;\r\n\r\n\t\t\t\tI.push(i);\r\n\t\t\t\tJ.push(j);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tconst promise = new Promise(function(resolve,reject){\r\n\t\t\t\r\n\t\t\tconst f = function(message){\r\n\t\t\t\t\r\n\t\t\t\t//postしたMessageに対応する結果以外は無視\r\n\t\t\t\tif(id != message.data.id) return;\r\n\t\t\t\t\r\n\t\t\t\t//最後の物だけ処置\r\n\t\t\t\tif(skippable && lastId != message.data.id) reject(\"中断\");\r\n\t\t\t\t\r\n\t\t\t\tworker.removeEventListener(\"message\",f);\r\n\t\t\t\tresolve(message.data);\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tworker.addEventListener(\"message\",f);\r\n\t\t\tworker.postMessage({id,skippable,I,J,m});\r\n\t\t});\r\n\t\t\r\n\t\treturn promise;\r\n\t};\r\n};\r\n\r\nconst skippable = true;\r\nconst threads = [];\r\nthreads.push(new Thread(skippable));\r\nthreads.push(new Thread(skippable));\r\nthreads.push(new Thread(skippable));\r\nthreads.push(new Thread(skippable));\r\nthreads.push(new Thread(skippable));\r\nthreads.push(new Thread(skippable));\r\nthreads.push(new Thread(skippable));\r\nthreads.push(new Thread(skippable));\r\n\r\nmodule.exports = function(ctx,width,height){\r\n\tconst id = Date.now();\r\n\t\r\n\t//IJ座標からXY座標への変換行列\r\n\tconst m = ctx.getTransform().invertSelf();\r\n\t\r\n\tconst dh = Math.floor(height / threads.length);\r\n\t\r\n\tconst promises = [];\r\n\tfor(let i=0; i<threads.length-1; i++){\r\n\t\tpromises.push(threads[i].set(id,dh * i,dh * (i + 1),width,m));\r\n\t}\r\n\tpromises.push(threads[threads.length-1].set(id,dh * (threads.length - 1),height,width,m));\r\n\t\r\n\t\r\n\treturn Promise.all(promises).then(function(results){\r\n\t\t\r\n\t\tctx.save();\r\n\t\tctx.resetTransform();\r\n\t\tctx.clearRect(0, 0, width, height);\r\n\t\tctx.restore();\r\n\t\t\r\n\t\tconst data = ctx.getImageData(0, 0, width, height);\r\n\t\t\r\n\t\tfor(let r of results){\r\n\t\t\tfor(let k=0; k<r.I.length; k++){\r\n\r\n\t\t\t\tconst i = r.I[k];\r\n\t\t\t\tconst j = r.J[k];\r\n\r\n\t\t\t\tconst index = (i + j * width) * 4;\r\n\t\t\t\t\r\n\t\t\t\tconst c = cb.get(r.Z[k] % 64);\r\n\t\t\t\t\r\n\t\t\t\tdata.data[index] = c.r; // R\r\n\t\t\t\tdata.data[index+1] = c.g; // G\r\n\t\t\t\tdata.data[index+2] = c.b; // B\r\n\t\t\t\tdata.data[index+3] = 255; // A\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tctx.putImageData(data, 0, 0);\r\n\t}).catch(function(reason){\r\n\t\t\r\n\t\t//console.log(\"skip\");\r\n\t});\r\n\t\r\n};\r\n","/*\r\n\tmandelbrot\r\n\t2020/10/26 新規作成\r\n*/\r\n\r\nconst Viewer = require(\"./Viewer.js\");\r\nconst mandelbrot = require(\"./mandelbrot.js\");\r\n\r\nconst vw = new Viewer(document.getElementById(\"viewer\"),{\r\n\t\r\n\tx: {\r\n\t\tinit: -0.5,\r\n\t\tmin: -2,\r\n\t\tmax: 1,\r\n\t},\r\n\t\r\n\ty: {\r\n\t\tinit: 0.0,\r\n\t\tmin: -1.5,\r\n\t\tmax: 1.5,\r\n\t},\r\n\t\r\n\tscale: {\r\n\t\tinit: 100,\r\n\t\tmin: 100,\r\n\t\tmax: 200000000,\r\n\t},\r\n\r\n},function(ctx,width,height){\r\n\t\r\n//\tconsole.time(\"s\");\r\n\t\r\n\treturn mandelbrot(ctx,width,height);\r\n\t\r\n//\tconsole.timeEnd(\"s\");\r\n\t\r\n},function(str){\r\n\t\r\n\tdocument.getElementById(\"status\").innerHTML = str;\r\n\t\r\n});\r\n"]}