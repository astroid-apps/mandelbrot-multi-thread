{"version":3,"sources":["mandelbrot_worker.js"],"names":["queue","processing","next","length","q","shift","skippable","self","postMessage","id","md","x","y","xn","yn","i","xn1","yn1","addEventListener","message","data","push","Z","m","k","I","a","c","J","e","b","d","f"],"mappings":";AAMA,IAAMA,EAAQ,GAGVC,GAAa,EAGXC,EAAO,SAAPA,IAEFF,GAAgB,GAAhBA,EAAMG,OAANH,CAKHC,GAAa,EAEPG,IAAAA,EAAIJ,EAAMK,QAEbD,EAAEE,WAAaN,EAAMG,OAAS,GAChCI,KAAKC,YAAY,CAChBC,GAAIL,EAAEK,KAEPP,KAECE,EAAEA,SAdHH,GAAa,GAkBTS,EAAK,SAASC,EAAEC,GAIjB,IAHAC,IAAAA,EAAK,EACLC,EAAK,EAEDC,EAAE,EAAGA,EAAE,IAAKA,IAAI,CACjBC,IACAC,EAAM,EAAIJ,EAAKC,EAAKF,EAIvBC,IAHHA,EAFYA,EAAKA,EAAKC,EAAKA,EAAKH,GAKxBE,GAFRC,EAAKG,GAEaH,EAAK,EAAG,OAAOC,EAG3B,OAAA,GAGRR,KAAKW,iBAAiB,UAAU,SAASC,GAElCV,IAAAA,EAAKU,EAAQC,KAAKX,GAClBH,EAAYa,EAAQC,KAAKd,UAuB/BN,EAAMqB,KAAK,CAACZ,GAAAA,EAAGL,EArBL,WAKL,IAHEkB,IAAAA,EAAI,GACJC,EAAIJ,EAAQC,KAAKG,EAEfC,EAAE,EAAGA,EAAEL,EAAQC,KAAKK,EAAEtB,OAAQqB,IAAI,CACnCb,IAAAA,EAAIY,EAAEG,EAAIP,EAAQC,KAAKK,EAAED,GAAKD,EAAEI,EAAIR,EAAQC,KAAKQ,EAAEJ,GAAKD,EAAEM,EAC1DjB,EAAIW,EAAEO,EAAIX,EAAQC,KAAKK,EAAED,GAAKD,EAAEQ,EAAIZ,EAAQC,KAAKQ,EAAEJ,GAAKD,EAAES,EAChEV,EAAED,KAAKX,EAAGC,EAAEC,IAGbL,KAAKC,YAAY,CAChBiB,EAAGN,EAAQC,KAAKK,EAChBG,EAAGT,EAAQC,KAAKQ,EAChBN,EAAAA,EACAb,GAAAA,IAGDP,KAGgBI,UAAAA,IAEA,GAAdL,GAAqBC","file":"mandelbrot_worker.d234d0c4.js","sourceRoot":"..\\src","sourcesContent":["/*\r\n\tworkerで順番に処理をする\r\n\t2020/11/06 新規作成\r\n*/\r\n\r\n//実行するキュー(関数の配列)\r\nconst queue = [];\r\n\r\n//処理中かどうか\r\nlet processing = false;\r\n\r\n//次のキューを実行する\r\nconst next = function(){\r\n\t\r\n\tif(queue.length == 0){\r\n\t\tprocessing = false;\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tprocessing = true;\r\n\t\r\n\tconst q = queue.shift();\r\n\t\r\n\tif(q.skippable && queue.length > 0){\r\n\t\tself.postMessage({\r\n\t\t\tid: q.id,\r\n\t\t});\r\n\t\tnext();\r\n\t}else{\r\n\t\t(q.q)();\r\n\t}\r\n};\r\n\r\nconst md = function(x,y){\r\n\tlet xn = 0;\r\n\tlet yn = 0;\r\n\t\r\n\tfor(let i=0; i<512; i++){\r\n\t\tconst xn1 = xn * xn - yn * yn + x;\r\n\t\tconst yn1 = 2 * xn * yn + y;\r\n\t\txn = xn1;\r\n\t\tyn = yn1;\r\n\t\t\r\n\t\tif(xn * xn + yn * yn > 4) return i;\r\n\t}\r\n\t\r\n\treturn 0;\r\n};\r\n\r\nself.addEventListener(\"message\",function(message){\r\n\t\r\n\tconst id = message.data.id;\r\n\tconst skippable = message.data.skippable;\r\n\t\r\n\tconst q = function(){\r\n\t\t\r\n\t\tconst Z = [];\r\n\t\tconst m = message.data.m;\r\n\t\t\r\n\t\tfor(let k=0; k<message.data.I.length; k++){\r\n\t\t\tconst x = m.a * message.data.I[k] + m.c * message.data.J[k] + m.e;\r\n\t\t\tconst y = m.b * message.data.I[k] + m.d * message.data.J[k] + m.f;\r\n\t\t\tZ.push(md(x,y));\r\n\t\t}\r\n\t\t\r\n\t\tself.postMessage({\r\n\t\t\tI: message.data.I,\r\n\t\t\tJ: message.data.J,\r\n\t\t\tZ,\r\n\t\t\tid,\r\n\t\t});\r\n\t\t\r\n\t\tnext();\r\n\t};\r\n\t\r\n\tqueue.push({id,q,skippable});\r\n\t\r\n\tif(processing == false) next();\r\n});"]}